
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>RackRewindableInput Lock File Not Found - Steve Robinson</title>
  <meta name="author" content="Steve Robinson">

  
  <meta name="description" content="We were doing some crazy things with our staging server and it ran out of space which we did not notice because of the lack of monitoring on this &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://steverobinson.in/blog/2015/03/11/lack-of-diskspace-makes-passenger-throw-rackrewindableinput-not-found">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Steve Robinson" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Steve Robinson</a></h1>
  
    <h2>My life, code & random musings...</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:steverobinson.in" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">RackRewindableInput Lock File Not Found</h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-03-11T17:05:41+05:30" pubdate data-updated="true">Mar 11<sup>th</sup>, 2015</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>We were doing some crazy things with our staging server and it ran out of space which we did not notice because of the lack of monitoring on this instance. When our Q/A tried accessing the server later on the app was inaccessible and was throwing 500s all over.</p>

<p>The exception tracker we are using sent us the stacktrace and the error message was incredibly puzzling - <code>Errno::ENOENT: No such file or directory /tmp/RackRewindableInput20150311-13259-cvqkcr.lock)</code>. I was not sure what to make of this and I had no idea that we had ran out of space.</p>

<!--more-->


<p>Using the stacktrace I figured out that the exception was thrown from a class - <code>RewindableInput</code> in the Passenger project. There was note saying this was a modified version of <code>Rack::RewindableInput</code>. So this is actually a part of the Rack codebase as well.</p>

<p>After doing some research I learned that this RewindableInput class is used to make a the request body <code>rewindable</code> which apparently means that you can bring it back to the original state whenever you want to (if I understand correctly).</p>

<p>The exception was thrown at <a href="https://github.com/phusion/passenger/blob/stable-3.0/lib/phusion_passenger/utils/rewindable_input.rb#L86">this line</a> where a <code>tempfile</code> is being created and since we did not have any space on the disk this could not happen and thus we got the error.</p>

<p>Even then, since the error message was <code>Errno::ENOENT: No such file or directory</code> and me being not aware of how <a href="https://www.omniref.com/ruby/2.2.1/symbols/Tempfile">Tempfile</a> works could not figure out that the reason was the diskspace. Then I ran into a StackOverflow answer where the OP had reported a similar problem with JRuby and the reccomended solution was the check if the <code>/tmp</code> directory is writable and has proper permissions. But the OP later reported that he had actually ran out of space.</p>

<p>Why did I not think of that? Anyway, I then ran <code>df</code> and found out the disk had no space left. I immediately cleared the junk that was created because of the <strong>crazy stuff</strong> I had been doing earlier and everything went back to normal.</p>

<p>So! If you ever come across this exception - <code>Errno::ENOENT: No such file or directory /tmp/RackRewindableInput&lt;timestamp&gt;-&lt;random&gt;.lock)</code> check your disk space first! :)</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Steve Robinson</span></span>

      








  


<time datetime="2015-03-11T17:05:41+05:30" pubdate data-updated="true">Mar 11<sup>th</sup>, 2015</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/ops/'>ops</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://steverobinson.in/blog/2015/03/11/lack-of-diskspace-makes-passenger-throw-rackrewindableinput-not-found/" data-via="stev4nity" data-counturl="http://steverobinson.in/blog/2015/03/11/lack-of-diskspace-makes-passenger-throw-rackrewindableinput-not-found/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2015/01/21/ruby-2-dot-0-boosts-rails-boot-time/" title="Previous Post: Ruby 2.0 boosts Rails boot time">&laquo; Ruby 2.0 boosts Rails boot time</a>
      
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/03/11/lack-of-diskspace-makes-passenger-throw-rackrewindableinput-not-found/">RackRewindableInput Lock File Not Found</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/01/21/ruby-2-dot-0-boosts-rails-boot-time/">Ruby 2.0 Boosts Rails Boot Time</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/11/30/your-own-geocoding-service/">Hosting FreeGeoIP in Your Cloud</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/10/31/outsourcing-image-processing/">Outsourcing Image Processing</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/23/on-foundations-validation-and-my-pull-request/">On Foundation's Validation &amp; My Pull Request</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Steve Robinson -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
